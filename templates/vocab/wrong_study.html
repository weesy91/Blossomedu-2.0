<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì˜¤ë‹µ ì§‘ì¤‘ í•™ìŠµ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding-bottom: 90px; } /* í•˜ë‹¨ ì—¬ë°± ì¶©ë¶„íˆ */
        .study-container { max-width: 600px; margin: 0 auto; padding: 20px; }
        
        .word-card {
            background: white;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 12px;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.1s;
        }
        .word-card:active { transform: scale(0.98); background-color: #f1f3f5; }

        .word-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* [ì¶”ê°€] ìŠ¤í”¼ì»¤ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .speaker-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #e7f1ff;
            color: #0d6efd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            cursor: pointer;
            flex-shrink: 0; /* ì°Œê·¸ëŸ¬ì§ ë°©ì§€ */
        }
        .speaker-btn:active { background-color: #cfe2ff; }

        .eng { font-weight: 800; font-size: 1.1rem; color: #212529; }
        .kor { font-size: 1rem; color: #0d6efd; font-weight: 600; text-align: right; }
        
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
            display: flex;
            justify-content: center;
            z-index: 1000;
        }
        .btn-start {
            width: 100%;
            max-width: 560px;
            padding: 16px;
            font-size: 1.2rem;
            font-weight: 800;
            border-radius: 16px;
        }
        .header-box {
            background-color: #fff5f5;
            border: 1px solid #ffc9c9;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="study-container">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-bold m-0">ğŸš¨ ì˜¤ë‹µ ì§‘ì¤‘ í•™ìŠµ</h4>
        <a href="/vocab/" class="btn btn-sm btn-light border rounded-pill">ë‚˜ê°€ê¸°</a>
    </div>

    <div class="header-box shadow-sm">
        <h5 class="fw-bold text-danger mb-1">ì´ {{ count }}ê°œì˜ ì·¨ì•½ ë‹¨ì–´</h5>
        <p class="text-muted small m-0">
            ë°œìŒì„ ë“¤ìœ¼ë©° í™•ì‹¤í•˜ê²Œ ì™¸ì›Œë³´ì„¸ìš”!<br>
            ì¤€ë¹„ê°€ ë˜ë©´ ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œí—˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.
        </p>
    </div>

    <div class="d-flex flex-column gap-2">
        {% for word in words %}
        <div class="word-card" onclick="speak('{{ word.english }}')">
            <div class="word-info">
                <div class="speaker-btn">ğŸ”Š</div>
                <span class="eng">{{ word.english }}</span>
            </div>
            <span class="kor">{{ word.korean }}</span>
        </div>
        {% empty %}
        <div class="text-center py-5 text-muted">
            ì˜¤ë‹µ ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤! ğŸ‰<br>ì™„ë²½í•˜ì‹œë„¤ìš”!
        </div>
        {% endfor %}
    </div>
</div>

<div class="bottom-bar">
    <a href="{% url 'vocab:exam' %}?mode=wrong" class="btn btn-danger btn-start shadow">
        ì‹œí—˜ ë³´ê³  íƒˆì¶œí•˜ê¸° ğŸ”¥
    </a>
</div>

<script>
    function speak(text) {
        // ìŒì„± í•©ì„± ê¸°ëŠ¥ ì§€ì› ì—¬ë¶€ í™•ì¸
        if ('speechSynthesis' in window) {
            // ê¸°ì¡´ ì¬ìƒ ì¤‘ì¸ ìŒì„± ì·¨ì†Œ (ì—°íƒ€ ì‹œ ê²¹ì¹¨ ë°©ì§€)
            window.speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US'; // ì˜ì–´ ë°œìŒ ì„¤ì •
            utterance.rate = 0.9;     // ì†ë„ (1.0ì´ ê¸°ë³¸, 0.9ëŠ” ì•½ê°„ ë˜ë°•ë˜ë°•)
            utterance.pitch = 1.0;    // í†¤
            
            window.speechSynthesis.speak(utterance);
        } else {
            alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¬ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }
</script>

</body>
</html>